<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <!-- google fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">

    <!-- awesome fonts -->
    <script src="https://kit.fontawesome.com/c3abce34d0.js" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="frontend/styles/home.css">
    <link rel="stylesheet" href="frontend/styles/chat.css">
    <title>Fitness Center | Member</title>

    <script>
        function scrollDown() {
            var ele = document.getElementById("prevChat");
            ele.scrollBy(0, 100000000); 
        }
    </script>
</head>
<body onload="scrollDown()">
    <!-- <nav id="home" class="navbar navbar-expand-lg">
        <div class="container-fluid px-5">
            <a class="navbar-brand" href="#">
                <h2>Fitness <span>Center</span></h2>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="col-lg-5"></div>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav m-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" aria-current="page" href="#home">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#plan">Workout Plan</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" aria-disabled="true" href="#about">Contact</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" aria-disabled="true" href="#about">About Us</a>
                    </li>
                    <li id="logout" class="nav-item">
                        <a class="nav-link" aria-disabled="true" href="logout.html">LOGOUT</a>
                    </li>
                </ul>

            </div>
        </div>
    </nav> -->

    <nav id="home" class="navbar navbar-expand-lg">
        <div class="container-fluid px-5">
            <a class="navbar-brand" href="#">
                <h2>Fitness <span>Center</span></h2>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="col-lg-3"></div>
            <div class="collapse navbar-collapse" id="navbarSupportedContent" >
                <ul class="navbar-nav m-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a style="cursor: pointer;" class="nav-link"  onclick="history.back()" aria-current="page" >Back</a>
                    </li>

                    <li id="logout" class="nav-item">
                        <a class="nav-link" aria-disabled="true" href="logout.html">LOGOUT</a>
                    </li>

                </ul>
                
            </div>
        </div>
    </nav>

    <div>
        <% if(trainer) { %>

            <div id="trainerHead">
                You are chatting with Trainer <strong>  <%= data[0].name %> </strong>
            </div>

            <!-- Showing Recent chat -->

            <div id="prevChat" >
                <% if(chat.length) {%>
                    <% for(i=0;i < chat.length;i++) { %>

                        <% if(chat[i].sender == 'member') { %>
                            <div class="you">
                                
                                <div class="youhead">
                                    You
                                </div>
                                <div class="youmessage">
                                    <%= chat[i].message %>
                                </div>

                            </div>
                            <br><br><br>
                        <% }  else { %>
                            <div class="other">
                                <div class="otherhead">
                                    Trainer
                                </div>
                                <div class="othermessage">
                                    <%= chat[i].message %>
                                </div>
                            </div>
                            <br>
                        <% } %>

                        

                    <% }%>
                    <div id="#chat"></div>
                <% } else { %>
                    no chat found
                <% } %>
            </div>
            
            <!-- Send message area -->
            <div id="messagearea">
                <form action="#" method="post">
                    <div class="input-group mb-3">
                        <input id="msg" autofocus required name="message" type="text" class="form-control form-control-lg bg-light fs-6 w-80"
                            placeholder="Enter your message here">
                    
                        <button id="sendmsg" class="btn btn-lg btn-primary fs-6">Send</button>
                    </div>
                </form>
            </div>


        <% } else { %>
            <center>
                <h1>
                    <br> <br> <br> <br>
                    No Trainer Assigned to Chat <br> Please contact admin to assign you a trainer.
                </h1>
            </center> 
        <% } %>
    </div>
</body>